<article class="post">
  <div class="title">
    <a href="" target="_blank">{{post.title}}</a>
  </div>

  {{#if three}}
    <canvas id="three"></canvas>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.142.0/build/three.module.js"
        }
      }
    </script>

    <script src="/javascript/integrate.js" type="module"></script>
  {{else}}
    <div>
      {{post.description}}
    </div>
  {{/if}}
  

  <div class="meta">
    {{post.vote_count}} {{post.has_voted}} point(s) by {{post.user.username}}
    |
    <a href="/post/{{post.id}}">{{post.comments.length}} comment(s)</a>
  </div>
</article>

{{#if loggedIn}}
<form class="comment-form" id="comment-form">
    <div class="form-floating"> <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea> <label for="floatingTextarea2">Comments</label> </div>
  
    <div class="m-1">
      <button class="btn btn-primary mr-2"type="submit">Add Comment</button>
      <button type="button" class="btn btn-secondary upvote-btn" id="upvote-btn">Upvote</button>
    </div>
  </form>
{{/if}}

<div class="comments">
  {{#each post.comments}}
  <section class="comment card">
      <div class="card-body">
          <div class="meta card-title">
        {{user.username}}
      </div>
      <div class="text card-text">
        {{comment_text}}
          </div>
      </div>
    </section>
  {{/each}}
</div>

{{#if loggedIn}}
<script src="/javascript/comment.js"></script>
<script src="/javascript/upvote.js"></script>
{{/if}}
